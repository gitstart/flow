"use strict";const o=(t,s)=>({slug:t,plugin:s}),r=o("google-calendar",t=>{const s="tokens";return{onRequest:async(e,a)=>{if(e.path==="/auth")return a.redirect("https://google-calendar.vercel.com/api/auth");if(e.path==="/auth/callback"&&e.method==="POST"){const n={...e.body,expires_at:t.dayjs().add((e.body.expires_in??10)-10,"seconds").toISOString()};return delete n.expires_in,await t.store.setSecretItem(s,n),a.status(200).send()}}}});module.exports=r;
